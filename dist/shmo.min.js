!function(t){"use strict";var n=$(t),e=$("html"),i=t.transition={move:function(n){return n="string"==typeof n?$(n)[0]:n.length>0?n[0]:n,t.move(n).duration(constants.DURATION).ease(constants.EASE)},toggleClasses:function(t){e.toggleClass("routing",t).toggleClass("not-routing",!t)},forward:function(t,n,e){var o=t.data("transition")||constants.TRANSITION;i.toggleClasses(!0),t.visible(!0).insertAfter(n);var s=move(t.length>0?t[0]:t).duration(0);i.reset(s,"section",o),s.end(function(){var s=i.move(t),a=i.move(n),c=i.get("section",o);c(s,a),s.end(function(){i.toggleClasses(!1),e&&e()}),a.end(function(){n.visible(!1)})})},back:function(t,n,e){i.toggleClasses(!0);var o=n.data("transition")||constants.TRANSITION,s=i.move(n),a=i.move(t);i.reset(a,"section"),i.reset(s,"section",o),t.visible(!0),a.end(function(){t.insertAfter(n),i.toggleClasses(!1),e&&e()}),s.end(function(){n.visible(!1)})},show:function(t,n,e){t.trigger("showing").addClass("showing");var o=i.move(t);i.reset(o,n,e),o.duration(0).end(function(){var o=i.move(t);i.get(n,e)(o),o.end(function(){t.trigger("shown").addClass("shown").removeClass("showing hidden")})})},hide:function(t,n,e){t.trigger("hiding").addClass("hiding");var o=i.move(t);i.reset(o,n,e),o.end(function(){t.trigger("hidden").addClass("hidden").removeClass("hiding shown")})},get:function(t,n,e){var o=i[t]||i,s=o[n]||o;return s=s[e||"run"]||s},reset:function o(t,n,e){t.opacity(1).translate(0,0).rotate(0).scale(1);var s=i.get(n,e,"reset");return s!==o&&$.isFunction(s)&&s(t),t},section:{rotate:{reset:function(t){t.opacity(0).x(n.width()/2).rotate(15).y(n.height()/3).scale(1)},run:function(t){t.y(0).x(0).scale(1).rotate(0).opacity(1)}},slide:{reset:function(t){t.x(n.width())},run:function(t,n){t.x(0),n.opacity(0).rotateY(-45)}},slip:{reset:function(t){t.x(n.width())},run:function(t,e){t.x(0),e.x(-n.width()/2)}},cover:{reset:function(t){t.y(n.height())},run:function(t,n){t.y(0),n.rotateX(25).opacity(0)}}},modal:{reset:function(t){t.opacity(0).duration(constants.DURATION/4|0)},run:function(t){t.opacity(1).duration(constants.DURATION/4|0)}},prompt:{reset:function(t){t.y(n.height()/5).opacity(0).duration(constants.DURATION/3|0)},run:function(t){t.y(0).opacity(1).duration(constants.DURATION/3|0)}}}}(window),function(t,n){"use strict";function e(t,n,e){return n=Array.from(n),n.unshift(e),Function.prototype.bind.apply(t,n)}function i(){var t=p;p=null,t&&t()}function o(t,n){t?transition.show(u,"prompt",n):transition.hide(u,"prompt",d)}function s(t,n,i,c){return c=r(c),u?v!==g.HIDDEN?void a(!1,e(s,arguments)):(u.html(t).removeAttr("class").attr("class","notification-window").addClass(i).css({width:.8*f.width()|0,height:"auto"}),u.css({height:0|Math.min(u.height(),.8*f.height()),left:(f.width()-u.width())/2|0}),u.css({top:(f.height()-u.height())/2|0}),transition.show(l,"modal"),clearTimeout(h),u.one("shown",function(){d=i,n>0?h=setTimeout(a.bind(null,null,c),1e3*n):u.one("hidden",c)}),void o(!0,i)):(l=$('<div class="notification"/>').appendTo("body"),u=$('<div class="notification-window"/>').appendTo("body").on("hidden showing shown hiding",function(t){v=t.type}).on("tap",function(t){t.isDefaultPrevented()||y.hide()}),void setTimeout(e(s,arguments),20))}function a(t,n){return n=r(n),v==g.HIDDEN?void m(n):v===g.SHOWING?void u.one("shown",e(a,arguments)):(p=function(){m(n)},void(v===g.SHOWN&&(u.one("hidden",i),o(!1),t!==!1&&transition.hide(l,"modal"))))}function c(t,n,e){var i=$(document.createDocumentFragment());return e&&$('<span class="icon"/>').addClass(e).appendTo(i),t&&$('<strong class="text bold" />').html(t).appendTo(i),$("<small />").html(n||"").appendTo(i),i}function r(t){return t?function(){var n=t;t=null,n&&n.apply(this,arguments)}:$.noop}var u,l,d,h,p,f=$(t),m=t.setImmediate,g={};"hidden showing shown hiding".split(" ").forEach(function(t){g[t.toUpperCase()]=t});var v=g.HIDDEN,y=t.notification={show:function(t,n,e,i,o){var a;return a=t?c(t,n,e):'<div data-loading="white" />',s(a,i,null,o)},hide:function(){a()},error:function w(t,n,e,i,o){if("object"===$.type(t)){var a=t;return w.call(this,a.title,a.description,a.icon,a.duration,a.callback)}return s(c(t,n,e||"remove-sign"),i,"error",o)},success:function b(t,n,e,i,o){if("object"===$.type(t)){var a=t;return b.call(this,a.title,a.description,a.icon,a.duration,a.callback)}return s(c(t,n,e||"ok"),i,"success",o)},successThenBack:function T(t,n,e,i,o){return"object"===$.type(t)&&"title"in t?T(t.title,t.description,t.icon,t.duration,t.callback):void y.success(t,n,e,i,function(){router.back(),o&&o.apply(null,arguments)})},errorThenBack:function N(t,n,e,i,o){return"object"===$.type(t)&&"title"in t?N(t.title,t.description,t.icon,t.duration,t.callback):void y.error(t,n,e,i,function(){router.back(),o&&o.apply(null,arguments)})},html:function(t,n,e,i){return s(t,null,"html "+e,i)},push:function(e,i,o){var s=e;"object"==typeof s&&(e=s.text,i=s.duration,o=s.callback);var a=$('<div class="notification push" />');if(a.text(e).appendTo("body").style("top",-screen.height).show().style("top",-a.height()),s.canDismiss!==!1){$('<span class="dismiss icon remove on-right"></span>').prependTo(a);var c=0,r=0,u=0,l=a[0].style,d=!0;a.on("touchstart",function(t){c=r=t.touches&&t.touches[0]?t.touches[0].pageY:t.pageY,u=0,d=Date.now()}).on("touchmove",function(t){if(d){var n=t.touches&&t.touches[0]?t.touches[0].pageY:t.pageY;u+=r>n?1:-1,r=n;var e=r-c;0>=e&&(l.top=e+"px")}}).on("touchend",function(){d=!1,u>3?(i=100,h(),s.dismiss&&s.dismiss.apply(a[0])):l.top="0px",u=0})}var h=function(){t.setImmediate(function(){a&&a[0]&&move(a[0]).set("top",-a.height()).duration(i).end()}),setTimeout(function(){a&&a[0]&&(a.remove(),l=n,a=n,s=n)},constants.DURATION)};s.className&&a.addClass(s.className),a.one("tap",function(t){i=200,h(),$(t.target||t.srcElement).hasClass("dismiss")?s.dismiss&&s.dismiss.apply(this):o&&o.apply(this)}),t.setImmediate(function(){i=constants.DURATION,move(a[0]).set("top",0).duration(i).end()}),setTimeout(h,1e3*(i||5))},multi:function(t){if(t){t.items||(t={items:t});var n=c(t.title||t.text,t.description,t.icon);if(!Array.isArray(t.items)){var e=t.items;t.items=Object.keys(e).map(function(t){var n=e[t];return $.isFunction(n)?{callback:n,label:t}:(n.label||(n.label=t),n)})}return t.items.forEach(function(t){$('<button class="anchor" />').addClass(t.className||"").text(t.label||"").on("tap",function(){t.callback&&u.one("hidden",t.callback),y.hide()}).appendTo(n)}),utils.hideKeyboard(),y.html(n,null,t.className||"multi",t.callback||$.noop)}},confirm:function(t){return this.multi({title:t.title,description:t.description,className:"confirm",items:{accept:t.accept,cancel:Object.assign(t.cancel,{className:"text red"})}})}}}(window);
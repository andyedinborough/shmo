!function(t){"use strict";Function.prototype.bind||(Function.prototype.bind=function(t){var n=this,e=[].slice.apply(arguments,[1]);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(t,i)}}),Object.assign||(Object.assign=function(t,n){var e=function(n){Object.keys(n).forEach(function(e){t[e]=n[e]})};return arguments.length>2?[].slice.apply(arguments,[1]).forEach(e):e(n),t}),Object.setPrototypeOf||(Object.setPrototypeOf=function(t,n){return t.__proto__=n,t}),Date.now||(Date.now=function(){return(new Date).getTime()}),Object.assign(Array.prototype,{first:function(t){t||(t=function(){return!0});var n;return this.some(function(e){return t(e)?(n=e,!0):void 0})?n:void 0},last:function(t){if(!t)return this[this.length-1];for(var n=this.length-1;n>=0;n--){var e=this[n];if(t(e))return e}}}),Array.from||(Array.from=function(t){return Array.prototype.slice.apply(t)}),Array.of||(Array.of=function(){return Array.from(arguments)}),t.setImmediate||(t.setImmediate=function(t){setTimeout(t,0)}),function(){var n=0,e=t.requestAnimationFrame,i=t.cancelAnimationFrame;if(!e)for(var o=["ms","moz","webkit"],a=0;a<o.length&&!t.requestAnimationFrame;++a)e=t[o[a]+"RequestAnimationFrame"],i=t[o[a]+"CancelAnimationFrame"]||t[o[a]+"CancelRequestAnimationFrame"];e||(e=function(e){var i=Date.now(),o=Math.max(0,16-(i-n)),a=t.setTimeout(function(){e(i+o)},o);return n=i+o,a}),i||(i=function(t){clearTimeout(t)}),t.requestAnimationFrame=e,t.cancelAnimationFrame=i}()}(window),function(){"use strict";var t=0,n={};$.fn.forEach=Array.prototype.forEach,$.fn.boot=function(t){var e=this.id();return(!n[e]||t)&&(n[e]=!0,this.trigger("boot")),this},$.fn.id=function(){var n=this[0].id;return n||(n="e"+t++,this.attr("id",n)),n},$.fn.visible=function(t){return 0===arguments.length?this.is(":visible"):this.css("visibility",t?"visible":"hidden")};var e=$(document);$.on=$.fn.on.bind(e),$.off=$.fn.off.bind(e)}(window),function(){"use strict";move.prototype.rotateY=function(t){return this.transform("rotateY("+t+"deg)")},move.prototype.rotateX=function(t){return this.transform("rotateX("+t+"deg)")},move.prototype.opacity=function(t){return this.set("opacity",t)}}(window),function(t,n){"use strict";var e,i,o,a="._tap",r="._tapActive",s="tap",c="clientX clientY screenX screenY pageX pageY".split(" "),u={count:0,event:0},l=function(t,e){var i=e.originalEvent,o=n.Event(i);o.type=t;for(var a=0,r=c.length;r>a;a++)o[c[a]]=e[c[a]];return o},d=function(t){if(t.isTrigger)return!1;var e=u.event,i=Math.abs(t.pageX-e.pageX),o=Math.abs(t.pageY-e.pageY),a=Math.max(i,o);return t.timeStamp-e.timeStamp<n.tap.TIME_DELTA&&a<n.tap.POSITION_DELTA&&(!e.touches||1===u.count)&&p.isTracking},h=function(t){if(!o)return!1;var e=Math.abs(t.pageX-o.pageX),i=Math.abs(t.pageY-o.pageY),a=Math.max(e,i);return Math.abs(t.timeStamp-o.timeStamp)<750&&a<n.tap.POSITION_DELTA},f=function(t){if(0===t.type.indexOf("touch")){t.touches=t.originalEvent.changedTouches;for(var n=t.touches[0],e=0,i=c.length;i>e;e++)t[c[e]]=n[c[e]]}t.timeStamp=Date.now?Date.now():+new Date},p={isEnabled:!1,isTracking:!1,enable:function(){p.isEnabled||(p.isEnabled=!0,e=n(t.body).on("touchstart"+a,p.onStart).on("mousedown"+a,p.onStart).on("click"+a,p.onClick))},disable:function(){p.isEnabled&&(p.isEnabled=!1,e.off(a))},onStart:function(t){t.isTrigger||(f(t),(!n.tap.LEFT_BUTTON_ONLY||t.touches||1===t.which)&&(t.touches&&(u.count=t.touches.length),p.isTracking||(t.touches||!h(t))&&(p.isTracking=!0,u.event=t,t.touches?(o=t,e.on("touchend"+a+r,p.onEnd).on("touchcancel"+a+r,p.onCancel)):e.on("mouseup"+a+r,p.onEnd))))},onEnd:function(t){var e;t.isTrigger||(f(t),d(t)&&(e=l(s,t),i=e,n(u.event.target).trigger(e)),p.onCancel(t))},onCancel:function(t){t&&"touchcancel"===t.type&&t.preventDefault(),p.isTracking=!1,e.off(r)},onClick:function(t){return!t.isTrigger&&i&&i.isDefaultPrevented()&&i.target===t.target&&i.pageX===t.pageX&&i.pageY===t.pageY&&t.timeStamp-i.timeStamp<750?(i=null,!1):void 0}};n(t).ready(p.enable),n.tap={POSITION_DELTA:10,TIME_DELTA:400,LEFT_BUTTON_ONLY:!0}}(document,jQuery),function(t){"use strict";t.utils={hideKeyboard:function(){var t=document.querySelector(":focus");t&&t.blur&&t.blur()}}}(window),function(t){"use strict";var n=$(t),e=$("body"),i=t.router={history:[],back:function(t){var n=i.history.pop(),e=i.history.last();transition.back(e,n,t)},section:function(t,n){var e=current.section,o=$(t);return i.history.push(o),e?transition.forward(o,e,n):(o.visible(!0).insertAfter($("section:last")).boot(),n&&n()),o},aside:function o(t,a){"function"==typeof t&&(a=t,t=null);var r=t?$(t):null,s=function(){transition.toggleClasses(!1),a&&a()};return!t||current.aside&&r[0]==current.aside[0]?(transition.toggleClasses(!0),transition.move("body").x(0).end(s),void(current.aside=null)):(current.aside?i.aside(o.bind(i,t,a)):(current.aside=r,transition.toggleClasses(!0),transition.move(e).x(n.width()*constants.ASIDE_WIDTH|0).end(s)),r)}}}(window),function(t){"use strict";var n=$(t),e=$("html"),i=t.transition={move:function(n){return n="string"==typeof n?$(n)[0]:n.length>0?n[0]:n,t.move(n).duration(constants.DURATION).ease(constants.EASE)},toggleClasses:function(t){e.toggleClass("routing",t).toggleClass("not-routing",!t)},forward:function(t,n,e){var o=t.data("transition");o||(o=constants.TRANSITION,t.attr("data-transition",o)),i.toggleClasses(!0),t.visible(!0).insertAfter(n).boot(),i.showing(t),i.hiding(n);var a=move(t.length>0?t[0]:t).duration(0);i.reset(a,"section",o),a.end(function(){var a=i.move(t),r=i.move(n),s=i.get("section",o);s(a,r),a.end(function(){i.toggleClasses(!1),e&&e()}),r.end(function(){n.visible(!1)})})},back:function(t,n,e){i.toggleClasses(!0),i.showing(t),i.hiding(n);var o=n.data("transition")||constants.TRANSITION,a=i.move(n),r=i.move(t);i.reset(r,"section"),i.reset(a,"section",o),t.visible(!0),r.end(function(){t.insertAfter(n),i.toggleClasses(!1),e&&e()}),a.end(function(){n.visible(!1)})},showing:function(t){t.addClass("showing").trigger("showing")},shown:function(t){t.addClass("shown").removeClass("showing hidden").trigger("shown")},hiding:function(t){t.addClass("hiding").trigger("hiding")},hidden:function(t){t.addClass("hidden").removeClass("hiding shown").trigger("hidden")},show:function(t,n,e){i.showing(t);var o=i.move(t);i.reset(o,n,e),o.duration(0).end(function(){var o=i.move(t);i.get(n,e)(o),o.end(function(){i.shown(t)})})},hide:function(t,n,e){i.hiding(t);var o=i.move(t);i.reset(o,n,e),o.end(function(){i.hidden(t)})},get:function(t,n,e){var o=i[t]||i,a=o[n]||o;return a=a[e||"run"]||a},reset:function o(t,n,e){t.opacity(1).translate(0,0).rotate(0).scale(1);var a=i.get(n,e,"reset");return a!==o&&$.isFunction(a)&&a(t),t},section:{rotate:{reset:function(t){t.opacity(0).x(n.width()/2).rotate(15).y(n.height()/3).scale(1)},run:function(t){t.y(0).x(0).scale(1).rotate(0).opacity(1)}},slide:{reset:function(t){t.x(n.width())},run:function(t,n){t.x(0),n.opacity(0).rotateY(-45)}},slip:{reset:function(t){t.x(n.width())},run:function(t,e){t.x(0),e.x(-n.width()/2).rotateY(-10)}},cover:{reset:function(t){t.y(n.height())},run:function(t,n){t.y(0),n.rotateX(25).opacity(0)}}},modal:{reset:function(t){t.opacity(0).duration(constants.DURATION/4|0)},run:function(t){t.opacity(1).duration(constants.DURATION/4|0)}},prompt:{reset:function(t){t.y(n.height()/5).opacity(0).duration(constants.DURATION/3|0)},run:function(t){t.y(0).opacity(1).duration(constants.DURATION/3|0)}}}}(window),function(t,n){"use strict";function e(t,n,e){return n=Array.from(n),n.unshift(e),Function.prototype.bind.apply(t,n)}function i(){var t=f;f=null,t&&t()}function o(t,n){t?transition.show(u,"prompt",n):transition.hide(u,"prompt",d)}function a(t,n,i,s){return s=c(s),u?v!==m.HIDDEN?void r(!1,e(a,arguments)):(u.html(t).removeAttr("class").attr("class","notification-window").addClass(i).css({width:.8*p.width()|0,height:"auto"}).boot(!0),u.css({height:0|Math.min(u.height(),.8*p.height()),left:(p.width()-u.width())/2|0}),u.css({top:(p.height()-u.height())/2|0}),transition.show(l,"modal"),clearTimeout(h),u.one("shown",function(){d=i,n>0?h=setTimeout(r.bind(null,null,s),1e3*n):u.one("hidden",s)}),void o(!0,i)):(l=$('<div class="notification"/>').appendTo("body"),u=$('<div class="notification-window"/>').appendTo("body").on("hidden showing shown hiding",function(t){v=t.type}).on("tap",function(t){t.isDefaultPrevented()||y.hide()}),void setTimeout(e(a,arguments),20))}function r(t,n){return n=c(n),v==m.HIDDEN?void g(n):v===m.SHOWING?void u.one("shown",e(r,arguments)):(f=function(){g(n)},void(v===m.SHOWN&&(u.one("hidden",i),o(!1),t!==!1&&transition.hide(l,"modal"))))}function s(t,n,e){var i=$(document.createDocumentFragment());return e&&$('<span class="icon glyphicon"/>').addClass("glyphicon-"+e).appendTo(i),t&&$('<strong class="text bold" />').html(t).appendTo(i),$("<small />").html(n||"").appendTo(i),i}function c(t){return t?function(){var n=t;t=null,n&&n.apply(this,arguments)}:$.noop}var u,l,d,h,f,p=$(t),g=t.setImmediate,m={};"hidden showing shown hiding".split(" ").forEach(function(t){m[t.toUpperCase()]=t});var v=m.HIDDEN,y=t.notification={show:function(t,n,e,i,o){var r;return r=t?s(t,n,e):'<div data-loading="white" />',a(r,i,null,o)},hide:function(){r()},error:function b(t,n,e,i,o){if("object"===$.type(t)){var r=t;return b.call(this,r.title,r.description,r.icon,r.duration,r.callback)}return a(s(t,n,e||"remove"),i,"error",o)},success:function w(t,n,e,i,o){if("object"===$.type(t)){var r=t;return w.call(this,r.title,r.description,r.icon,r.duration,r.callback)}return a(s(t,n,e||"ok"),i,"success",o)},html:function(t,n,e,i){return a(t,null,"html "+e,i)},push:function(e,i,o){var a=e;"object"==typeof a&&(e=a.text,i=a.duration,o=a.callback);var r=$('<div class="notification-push" />');if(r.text(e).appendTo("body").css("top",-screen.height).show().css("top",-r.height()),a.canDismiss!==!1){$('<span class="dismiss glyphicon glyphicon-remove pull-right"></span>').prependTo(r);var s=0,c=0,u=0,l=r[0].style,d=!0;r.on("touchstart",function(t){s=c=t.touches&&t.touches[0]?t.touches[0].pageY:t.pageY,u=0,d=Date.now()}).on("touchmove",function(t){if(d){var n=t.touches&&t.touches[0]?t.touches[0].pageY:t.pageY;u+=c>n?1:-1,c=n;var e=c-s;0>=e&&(l.top=e+"px")}}).on("touchend",function(){d=!1,u>3?(i=100,h(),a.dismiss&&a.dismiss.apply(r[0])):l.top="0px",u=0})}var h=function(){t.setImmediate(function(){r&&r[0]&&move(r[0]).set("top",-r.height()).duration(i).end()}),setTimeout(function(){r&&r[0]&&(r.remove(),l=n,r=n,a=n)},constants.DURATION)};a.className&&r.addClass(a.className),r.one("tap",function(t){i=200,h(),$(t.target||t.srcElement).hasClass("dismiss")?a.dismiss&&a.dismiss.apply(this):o&&o.apply(this)}),t.setImmediate(function(){i=constants.DURATION,move(r[0]).set("top",0).duration(i).end()}),setTimeout(h,1e3*(i||5))},multi:function(t){if(t){t.items||(t={items:t});var n=s(t.title||t.text,t.description,t.icon);if(!Array.isArray(t.items)){var e=t.items;t.items=Object.keys(e).map(function(t){var n=e[t];return $.isFunction(n)?{callback:n,label:t}:(n.label||(n.label=t),n)})}return t.items.forEach(function(t){$('<button class="anchor" />').addClass(t.className||"").text(t.label||"").on("tap",function(){t.callback&&u.one("hidden",t.callback),y.hide()}).appendTo(n)}),utils.hideKeyboard(),y.html(n,null,t.className||"multi",t.callback||$.noop)}},confirm:function(t){return this.multi({title:t.title,description:t.description,className:"confirm",items:{accept:t.accept,cancel:Object.assign(t.cancel,{className:"text red"})}})}}}(window),function(t){"use strict";function n(t){var n=t.touches||(t.originalEvent?t.originalEvent.touches:null);return n&&n.length>0?n[0].pageX:t.pageX}var e=$(t),i=$("body"),o=$("html"),a=t.current={article:null,aside:null};Object.defineProperty(a,"section",{get:function(){return router.history.last()}});var r=t.constants={DURATION:400,EASE:"in-out",ASIDE_WIDTH:.7,TRANSITION:"slip"};e.on("resize deviceorientationchange load init",function(){var t=e.height(),n=e.width(),a=$("aside"),s=$("section");a.height(t).css({right:n,width:n*r.ASIDE_WIDTH|0}).insertAfter(s.last()),i.width(n).height(t),o.toggleClass("portrait",t>n).toggleClass("landscape",n>t),s.height(t).width(n),s.forEach(function(n){n=$(n);var e=n.children("header:visible");e.addClass("cf");var i=n.children("footers:visible"),o=n.children("article"),a=e.height(),r=i.height();o.forEach(function(n){n=$(n),n.height(t-a-r)})})}),$.on("boot",function(t){$("[data-icon]",t.target).forEach(function(t){t=$(t),$('<span class="glyphicon" />').addClass("glyphicon-"+t.data("icon")).prependTo(t),t.removeAttr("data-icon")}),$("[data-loading]",t.target).forEach(function(t){t=$(t).empty(),$('<div class="loading" />').addClass(t.data("loading")).appendTo(t)})}),$(function(){e.trigger("init"),transition.toggleClasses(!1),router.section("#main"),$("aside").visible(!0)}),$.on("tap",".not-routing [data-section]",function(t){t.preventDefault();var n=$(this).data("section");"back"===n?router.back():router.section("#"+n)}).on("tap",".not-routing [data-aside]",function(t){t.preventDefault(),router.aside("#"+$(this).data("aside"))}),function(){var t,e,o,a;$.on("touchstart mousedown",".not-routing [data-aside]",function(i){return t=n(i),a=0,e=$("#"+$(this).data("aside")),0===e.length?void(e=null):void(o=e.width())}).on("touchmove mousemove",function(r){e&&(r.preventDefault(),a=n(r)-t,a=Math.max(0,a),a=Math.min(o,a),i.css("transform","translateX("+a+"px)"))}).on("touchend mouseup",function(t){if(e){if(0!==a){t.preventDefault();var n=a>o/2;n?router.aside(e):router.aside()}e=null}})}()}(window);